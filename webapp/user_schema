CREATE TABLE users (
user_id MEDIUMINT UNSIGNED NOT NULL AUTO_INCREMENT,
name VARCHAR(100) NOT NULL,
email VARCHAR(60) NOT NULL,
pass CHAR(40) NOT NULL,
PRIMARY KEY (user_id)
);

CREATE TABLE patients (
patient_id VARCHAR(100) NOT NULL,
patient_fname VARCHAR(50) NOT NULL,
patient_lname VARCHAR(50) NOT NULL,
birthdate DATETIME NOT NULL,
checkin DATETIME NOT NULL,
checkout DATETIME,
gender VARCHAR(6) NOT NULL,
diabetes VARCHAR(3) NOT NULL,
insurance VARCHAR(25) NOT NULL,
PRIMARY KEY (patient_id)
);

CREATE TABLE activities (
activity_id SMALLINT UNSIGNED NOT NULL,
acticity_name VARCHAR(100) NOT NULL,
/*'surgery' or 'post-op'*/
activity_category CHAR(7) NOT NULL,
PRIMARY KEY (activity_id)
);

CREATE TABLE roles (
role_id SMALLINT UNSIGNED NOT NULL,
role_name VARCHAR(100) NOT NULL,
salary INT UNSIGNED NOT NULL,
PRIMARY KEY (role_id)
);

CREATE TABLE activ_role (
activity_id SMALLINT UNSIGNED NOT NULL,
role_id SMALLINT UNSIGNED NOT NULL,
activity_default_time MEDIUMINT UNSIGNED NOT NULL,
/*the activity day is '0', '1', 'n' or 'd'*/
activity_day CHAR(1),
PRIMARY KEY (activity_id, role_id),
FOREIGN KEY (activity_id) REFERENCES acticities (activity_id) 
ON DELETE NO ACTION ON UPDATE NO ACTION,
FOREIGN KEY (role_id) REFERENCES roles (role_id) 
ON DELETE NO ACTION ON UPDATE NO ACTION
);

CREATE TABLE reports (
report_id BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
freq INT UNSIGNED NOT NULL,
time_duration MEDIUMINT UNSIGNED NOT NULL,
performer VARCHAR(100) NOT NULL,
patient_id VARCHAR(100) NOT NULL,
activity_id SMALLINT UNSIGNED NOT NULL,
role_id SMALLINT UNSIGNED NOT NULL,
PRIMARY KEY (report_id),
FOREIGN KEY (patient_id) REFERENCES patients (patient_id) 
ON DELETE NO ACTION ON UPDATE NO ACTION,
FOREIGN KEY (activity_id) REFERENCES acticities (activity_id) 
ON DELETE NO ACTION ON UPDATE NO ACTION,
FOREIGN KEY (role_id) REFERENCES roles (role_id) 
ON DELETE NO ACTION ON UPDATE NO ACTION
);



